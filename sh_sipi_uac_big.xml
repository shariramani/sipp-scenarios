<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE scenario SYSTEM "sipp.dtd">

<!-- This program is free software; you can redistribute it and/or -->
<!-- modify it under the terms of the GNU General Public License as -->
<!-- published by the Free Software Foundation; either version 2 of the -->
<!-- License, or (at your option) any later version. -->
<!-- -->
<!-- This program is distributed in the hope that it will be useful, -->
<!-- but WITHOUT ANY WARRANTY; without even the implied warranty of -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the -->
<!-- GNU General Public License for more details. -->
<!-- -->
<!-- You should have received a copy of the GNU General Public License -->
<!-- along with this program; if not, write to the -->
<!-- Free Software Foundation, Inc., -->
<!-- 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA -->
<!-- -->
<!-- Sipp Sip-I 'uac' scenario. -->
<!-- ./sipp -i 192.168.2.10 -p 5060 -sf sh_sipi_uac_big.xml -m 1 -l 1  192.168.2.54 -s +4987654321 -d 5000 -->

<scenario name="Basic Sipstone UAC">
<!-- In client mode (sipp placing calls), the Call-ID MUST be -->
<!-- generated by sipp. To do so, use [call_id] keyword. -->
<send retrans="500">
<![CDATA[

INVITE sip:[service]@[remote_ip]:[remote_port] SIP/2.0
Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]
From: +4916096912986 <sip:+4916096912986@[local_ip]:[local_port]>;tag=[pid]SIPpTag00[call_number]
To: sut <sip:[service]@[remote_ip]:[remote_port]>
Call-ID: [call_id]
CSeq: 1 INVITE
Contact: sip:+4916096912986@[local_ip]:[local_port]
Max-Forwards: 70
Accept: application/sdp, application/dtmf-relay
Allow: INVITE,ACK,OPTIONS,BYE,CANCEL,INFO,PRACK,NOTIFY,MESSAGE,UPDATE
P-Asserted-Identity: <sip:+4916096912986@[local_ip];transport=udp;user=phone;cpc=ordinary>
P-Early-Media: supported
Expires: 180
Supported: 100rel
Subject: Performance Test
Content-Type: multipart/mixed;boundary=level3-boundary
Content-Length: [len]
MIME-Version: 1.0

--level3-boundary
Content-Type: application/sdp

v=0
o=user1 53655765 2353687637 IN IP[local_ip_type] [local_ip]
s=-
c=IN IP[media_ip_type] [media_ip]
t=0 0
m=audio [media_port] RTP/AVP 96 97 9 98 99 100 101 8 102 103
b=AS:80
a=rtpmap:96 AMR-WB/16000
a=rtpmap:97 AMR-WB/16000
a=rtpmap:9 G722/8000
a=rtpmap:98 AMR/8000
a=rtpmap:99 AMR/8000
a=rtpmap:100 AMR/8000
a=rtpmap:101 AMR/8000
a=rtpmap:8 PCMA/8000
a=rtpmap:102 telephone-event/8000
a=rtpmap:0 PCMU/8000
a=rtpmap:103 telephone-event/16000
a=rtpmap:105 telephone-event/16000
a=maxptime:30
a=msi:mavodi-0-14d-1b7e-a-ffffffff-20f33423-@109.237.183.92
a=fmtp:96 mode-set=0,1,2;mode-change-period=2;mode-change-neighbor=1;max-red=0
a=fmtp:97 mode-change-capability=2;max-red=0
a=fmtp:98 mode-set=7;max-red=0
a=fmtp:99 mode-set=0,1,2,3,4,5,6,7;mode-change-period=2;mode-change-neighbor=1;max-red=0
a=fmtp:100 mode-set=0,2,4,7;mode-change-period=2;mode-change-neighbor=1;max-red=0
a=fmtp:101 mode-set=0,1,2,3,4,5,6,7;max-red=0
a=ptime:20
--level3-boundary
Content-Type: application/isup;base=itu-t92+;version=itu
Content-Disposition: session;handling=optional

\x01\x10\x49\x00\x0a\x03\x02\x0b\x09\x04\x90\x94\x51\x11\x72\x16\x73\xf9\x08\x01\x80\x0a\x09\x84\x13\x94\x61\x90\x96\x21\x89\x06\xc0\x0a\x06\x84\x10\x94\x61\x90\x96\x21\x89\x06\xf4\x05\xd3\xb3\x40\xf6\x13\x3d\x01\x1e\x00
--level3-boundary--

]]>
</send>

<recv response="100"
optional="true">
</recv>

<recv response="180" optional="true">
</recv>

<recv response="183" optional="true">
</recv>

<!-- By adding rrs="true" (Record Route Sets), the route sets -->
<!-- are saved and used for following messages sent. Useful to test -->
<!-- against stateful SIP proxies/B2BUAs. -->
<recv response="200" rtd="true">
</recv>

<!-- Packet lost can be simulated in any send/recv message by -->
<!-- by adding the 'lost = "10"'. Value can be [1-100] percent. -->
<send>
<![CDATA[

ACK sip:[service]@[remote_ip]:[remote_port] SIP/2.0
Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]
From: sipp <sip:sipp@[local_ip]:[local_port]>;tag=[pid]SIPpTag00[call_number]
To: sut <sip:[service]@[remote_ip]:[remote_port]>[peer_tag_param]
Call-ID: [call_id]
CSeq: 1 ACK
Contact: sip:sipp@[local_ip]:[local_port]
Max-Forwards: 70
Subject: Performance Test
Content-Length: 0

]]>
</send>

<!-- This delay can be customized by the -d command-line option -->
<!-- or by adding a 'milliseconds = "value"' option here. -->
<pause/>

<!-- The 'crlf' option inserts a blank line in the statistics report. -->
<send retrans="500">
<![CDATA[

BYE sip:[service]@[remote_ip]:[remote_port] SIP/2.0
Via: SIP/2.0/[transport] [local_ip]:[local_port];branch=[branch]
From: sipp <sip:sipp@[local_ip]:[local_port]>;tag=[pid]SIPpTag00[call_number]
To: sut <sip:[service]@[remote_ip]:[remote_port]>[peer_tag_param]
Call-ID: [call_id]
CSeq: 2 BYE
Contact: sip:sipp@[local_ip]:[local_port]
Max-Forwards: 70
Subject: Performance Test
Content-Type: application/isup;base=itu-t92+;version=itu
Content-Disposition: session;handling=optional
Content-Length: [len]

\x0c\x02\x00\x02\x87\x90

]]>
</send>

<recv response="200" crlf="true">
</recv>

<!-- definition of the response time repartition table (unit is ms) -->
<ResponseTimeRepartition value="10, 20, 30, 40, 50, 100, 150, 200"/>

<!-- definition of the call length repartition table (unit is ms) -->
<CallLengthRepartition value="10, 50, 100, 500, 1000, 5000, 10000"/>

</scenario>
